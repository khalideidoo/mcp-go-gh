// Code generated by tools/gen. DO NOT EDIT.
package generated

import (
	"context"
	"fmt"
	"github.com/khalideidoo/mcp-go-gh/internal/executor"
	"github.com/modelcontextprotocol/go-sdk/mcp"
)

// BrowseBrowseArgs defines parameters for gh browse browse
type BrowseBrowseArgs struct {
	Actions   bool   `json:"actions,omitempty" jsonschema:"description=Open repository actions"`
	Branch    string `json:"branch,omitempty" jsonschema:"description=Select another branch by passing in the branch name"`
	Commit    string `json:"commit,omitempty" jsonschema:"description=Select another commit by passing in the commit SHA"`
	NoBrowser bool   `json:"no_browser,omitempty" jsonschema:"description=Print destination URL instead of opening the browser"`
	Projects  bool   `json:"projects,omitempty" jsonschema:"description=Open repository projects"`
	Releases  bool   `json:"releases,omitempty" jsonschema:"description=Open repository releases"`
	Settings  bool   `json:"settings,omitempty" jsonschema:"description=Open repository settings"`
	Wiki      bool   `json:"wiki,omitempty" jsonschema:"description=Open repository wiki"`
	Repo      string `json:"repo,omitempty" jsonschema:"description=Select repository in OWNER/REPO format"`

	Target string `json:"target,omitempty" jsonschema:"description=Target to browse (number, path, or commit SHA) (positional)"`
}

// RegisterBrowseBrowseTool registers the gh browse browse tool
func RegisterBrowseBrowseTool(server *mcp.Server, exec *executor.Executor) {
	mcp.AddTool(server, &mcp.Tool{
		Name:        "gh_browse_browse",
		Description: "Open repository, issue, pull request, or file in the browser",
	}, func(ctx context.Context, req *mcp.CallToolRequest, args BrowseBrowseArgs) (*mcp.CallToolResult, any, error) {
		cmd := []string{"browse", "browse"}

		// Add positional argument: target
		if args.Target != "" {
			cmd = append(cmd, args.Target)
		}

		if args.Actions {
			cmd = append(cmd, "--actions")
		}

		if args.Branch != "" {
			cmd = append(cmd, "--branch", args.Branch)
		}

		if args.Commit != "" {
			cmd = append(cmd, "--commit", args.Commit)
		}

		if args.NoBrowser {
			cmd = append(cmd, "--no-browser")
		}

		if args.Projects {
			cmd = append(cmd, "--projects")
		}

		if args.Releases {
			cmd = append(cmd, "--releases")
		}

		if args.Settings {
			cmd = append(cmd, "--settings")
		}

		if args.Wiki {
			cmd = append(cmd, "--wiki")
		}

		if args.Repo != "" {
			cmd = append(cmd, "--repo", args.Repo)
		}

		result, err := exec.Execute(ctx, cmd...)
		if err != nil {
			return nil, nil, fmt.Errorf("gh browse browse failed: %w", err)
		}

		return &mcp.CallToolResult{
			Content: []mcp.Content{
				&mcp.TextContent{Text: result.Stdout},
			},
		}, nil, nil
	})
}
