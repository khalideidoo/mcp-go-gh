// Code generated by tools/gen. DO NOT EDIT.
package generated

import (
	"context"
	"fmt"
	"github.com/khalideidoo/mcp-go-gh/internal/executor"
	"github.com/modelcontextprotocol/go-sdk/mcp"
)

// OrgListArgs defines parameters for gh org list
type OrgListArgs struct {
	Json     []string `json:"json,omitempty" jsonschema:"Output JSON with the specified fields"`
	Jq       string   `json:"jq,omitempty" jsonschema:"Filter JSON output using a jq expression"`
	Template string   `json:"template,omitempty" jsonschema:"Format JSON output using a Go template"`
}

// RegisterOrgListTool registers the gh org list tool
func RegisterOrgListTool(server *mcp.Server, exec *executor.Executor) {
	mcp.AddTool(server, &mcp.Tool{
		Name:        "gh_org_list",
		Description: "List organizations for the authenticated user",
	}, func(ctx context.Context, req *mcp.CallToolRequest, args OrgListArgs) (*mcp.CallToolResult, any, error) {
		cmd := []string{"org", "list"}

		for _, v := range args.Json {
			cmd = append(cmd, "--json", v)
		}

		if args.Jq != "" {
			cmd = append(cmd, "--jq", args.Jq)
		}

		if args.Template != "" {
			cmd = append(cmd, "--template", args.Template)
		}

		result, err := exec.Execute(ctx, cmd...)
		if err != nil {
			return nil, nil, fmt.Errorf("gh org list failed: %w", err)
		}

		return &mcp.CallToolResult{
			Content: []mcp.Content{
				&mcp.TextContent{Text: result.Stdout},
			},
		}, nil, nil
	})
}
