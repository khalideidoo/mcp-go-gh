// Code generated by tools/gen. DO NOT EDIT.
package generated

import (
	"context"
	"fmt"
	"github.com/khalideidoo/mcp-go-gh/internal/executor"
	"github.com/modelcontextprotocol/go-sdk/mcp"
)

// SshKeyListArgs defines parameters for gh ssh-key list
type SshKeyListArgs struct {
}

// RegisterSshKeyListTool registers the gh ssh-key list tool
func RegisterSshKeyListTool(server *mcp.Server, exec *executor.Executor) {
	mcp.AddTool(server, &mcp.Tool{
		Name:        "gh_ssh-key_list",
		Description: "Lists SSH keys in your GitHub account",
	}, func(ctx context.Context, req *mcp.CallToolRequest, args SshKeyListArgs) (*mcp.CallToolResult, any, error) {
		cmd := []string{"ssh-key", "list"}

		result, err := exec.Execute(ctx, cmd...)
		if err != nil {
			return nil, nil, fmt.Errorf("gh ssh-key list failed: %w", err)
		}

		return &mcp.CallToolResult{
			Content: []mcp.Content{
				&mcp.TextContent{Text: result.Stdout},
			},
		}, nil, nil
	})
}

// SshKeyAddArgs defines parameters for gh ssh-key add
type SshKeyAddArgs struct {
	Title string `json:"title,omitempty" jsonschema:"description=Title for the new key"`
	Type  string `json:"type,omitempty" jsonschema:"description=Type of the SSH key,enum=authentication,enum=signing"`

	KeyFile string `json:"key_file,omitempty" jsonschema:"description=Path to SSH key file (positional argument)"`
}

// RegisterSshKeyAddTool registers the gh ssh-key add tool
func RegisterSshKeyAddTool(server *mcp.Server, exec *executor.Executor) {
	mcp.AddTool(server, &mcp.Tool{
		Name:        "gh_ssh-key_add",
		Description: "Add an SSH key to your GitHub account",
	}, func(ctx context.Context, req *mcp.CallToolRequest, args SshKeyAddArgs) (*mcp.CallToolResult, any, error) {
		cmd := []string{"ssh-key", "add"}

		// Add positional argument: key_file
		if args.KeyFile != "" {
			cmd = append(cmd, args.KeyFile)
		}

		if args.Title != "" {
			cmd = append(cmd, "--title", args.Title)
		}

		if args.Type != "" {
			cmd = append(cmd, "--type", args.Type)
		}

		result, err := exec.Execute(ctx, cmd...)
		if err != nil {
			return nil, nil, fmt.Errorf("gh ssh-key add failed: %w", err)
		}

		return &mcp.CallToolResult{
			Content: []mcp.Content{
				&mcp.TextContent{Text: result.Stdout},
			},
		}, nil, nil
	})
}

// SshKeyDeleteArgs defines parameters for gh ssh-key delete
type SshKeyDeleteArgs struct {
	Yes bool `json:"yes,omitempty" jsonschema:"description=Skip the confirmation prompt"`

	Id string `json:"id,omitempty" jsonschema:"description=SSH key ID (positional argument),required"`
}

// RegisterSshKeyDeleteTool registers the gh ssh-key delete tool
func RegisterSshKeyDeleteTool(server *mcp.Server, exec *executor.Executor) {
	mcp.AddTool(server, &mcp.Tool{
		Name:        "gh_ssh-key_delete",
		Description: "Delete an SSH key from your GitHub account",
	}, func(ctx context.Context, req *mcp.CallToolRequest, args SshKeyDeleteArgs) (*mcp.CallToolResult, any, error) {
		cmd := []string{"ssh-key", "delete"}

		// Add positional argument: id
		if args.Id != "" {
			cmd = append(cmd, args.Id)
		}

		if args.Yes {
			cmd = append(cmd, "--yes")
		}

		result, err := exec.Execute(ctx, cmd...)
		if err != nil {
			return nil, nil, fmt.Errorf("gh ssh-key delete failed: %w", err)
		}

		return &mcp.CallToolResult{
			Content: []mcp.Content{
				&mcp.TextContent{Text: result.Stdout},
			},
		}, nil, nil
	})
}
